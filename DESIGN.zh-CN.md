# 设计文档

[AI Web Scraper] 是一个基于 [LLM] 的 [Browser Extension]，它可以从任何网站上抓取数据，并按照用户提供的 [Prompt] 进行数据处理，并将处理后的数据返回给用户。

## 用户界面

### Popup

不涉及。

### Options

- 模型配置
  - 支持配置公有云模型服务。支持列表：DeepSeek、SeedFlow、Qwen
  - 支持配置私有化模型服务。支持列表：Ollama
- 模板管理

### Side Panel

当侧边栏打开时，显示一个圆角矩形面板，面板外部上方是图标+标题，面板内部分为左侧内容区、右侧工具栏。

左侧内容区：（从上到下）
1. 标题：[AI Web Scraper]
2. 步骤1，选择数据源，这是一个圆角矩形的Tab页
  - 当前页面
  - 粘贴链接（暂不开发）
  - 文件或图片（暂不开发）
3. 步骤2，选择爬取模板
  - 添加模板
  - 选择模板
    - 字段1
    - 字段2
    - 字段3
    - ...
4. 步骤3，爬取按钮

右侧工具栏：（从上到下）
1. 收起图标
2. 爬取图标
3. 设置图标(右下角)

## 交互流程

1. 当用户点击浏览器工具栏上的拼图块图标时，在弹出的窗口中显示 [AI Web Scraper] 的插件，点击后会打开到 [Side Panel] 页面。
2. 默认数据源为当前页面，用户可以选择其他数据源。
3. 用户可以添加模板，也可以选择已有的模板。模板包含了字段的名称、类型和提示词。
4. 用户可以点击爬取按钮，开始爬取数据。
5. 爬取完成后，用户可以在 [Side Panel] 页面中查看爬取的数据。
6. 用户可以选择以json、csv、excel格式导出数据，也可以直接复制到剪贴板。

## 业务逻辑

1. 从用户提供的数据源中获取数据
2. 将数据和提示词传递给 [LLM]
3. [LLM] 处理数据并返回处理后的数据
4. 将处理后的数据返回展示给用户，并且允许用户修改返回结果
5. 用户可以选择以json、csv、excel格式导出数据，也可以直接复制到剪贴板。

## 测试用例

1. 测试数据源为当前页面，根据用户提供的模板爬取数据，检查爬取结果是否正确。
2. 测试数据源为粘贴链接，根据用户提供的模板爬取数据，检查爬取结果是否正确。
3. 测试数据源为文件或图片，根据用户提供的模板爬取数据，检查爬取结果是否正确。

## 技术栈

- [Browser Extension]：Plasmo
- [LLM]：[DeepSeek]

## 参考资料

- [thunderbit](https://thunderbit.com/playground)
- [plasmo](https://docs.plasmo.com)
- [PlasmoHQ examples](https://github.com/PlasmoHQ/examples)
